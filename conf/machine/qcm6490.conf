#@TYPE: Machine
#@NAME: qcm6490
#@DESCRIPTION: Machine configuration for the development board, with Qualcomm QCM6490

require conf/machine/include/qcom-sc7280.inc

MACHINE_FEATURES = "usbhost usbgadget alsa wifi bluetooth"

KERNEL_IMAGETYPE = "Image"
KERNEL_DEVICETREE = "qcom/qcm6490-rb3.dtb qcom/qcm6490-idp.dtb"

UEFI_DTB = "qcm6490-idp.dtb"

EFI_ARCH = "aa64"
UKI_FILENAME = "uki.efi"

KERNEL_CMDLINE_EXTRA ?= "root=/dev/disk/by-partlabel/system rw rootwait console=ttyMSM0,115200n8 pcie_pme=nomsi earlycon"

MACHINE_ESSENTIAL_EXTRA_RRECOMMENDS += " \
    kernel-modules \
"

MACHINE_EXTRA_RDEPENDS += "packagegroup-firmware-qcm6490"

QCOM_BOOTIMG_ROOTFS ?= "/dev/disk/by-partlabel/system"

OVERLAYFS_ETC_MOUNT_POINT = "/mnt/overlay"
OVERLAYFS_ETC_DEVICE = "/dev/disk/by-partlabel/userdata"
OVERLAYFS_ETC_FSTYPE ?= "ext4"
OVERLAYFS_ETC_USE_ORIG_INIT_NAME = "0"
